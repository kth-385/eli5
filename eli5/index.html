<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explain Like I'm 5</title>
    <style>
        :root {
            --primary: #4285F4;
            --secondary: #34A853;
            --accent: #FBBC05;
            --error: #EA4335;
            --light: #f9f9f9;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #e0f7fa 0%, #bbdefb 100%);
            margin: 0;
            padding: 20px;
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: var(--primary);
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            color: var(--secondary);
            font-size: 1.3rem;
            margin-bottom: 20px;
        }
        
        .character {
            font-size: 3rem;
            margin: 15px 0;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        
        .input-area {
            margin-bottom: 25px;
            position: relative;
        }
        
        textarea {
            width: 100%;
            height: 180px;
            padding: 18px;
            border: 3px solid var(--primary);
            border-radius: 18px;
            font-size: 1.1rem;
            font-family: inherit;
            box-sizing: border-box;
            resize: vertical;
            transition: border-color 0.3s;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .button-container {
            text-align: center;
            margin: 25px 0;
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 50px;
            font-size: 1.3rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-family: inherit;
            box-shadow: 0 5px 15px rgba(66, 133, 244, 0.4);
        }
        
        button:hover {
            background-color: var(--secondary);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(52, 168, 83, 0.4);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        button .icon {
            margin-right: 10px;
            font-size: 1.5rem;
        }
        
        .output-area {
            background-color: var(--light);
            padding: 25px;
            border-radius: 18px;
            min-height: 150px;
            margin-top: 20px;
            border: 3px dashed var(--accent);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        
        .output-area h3 {
            color: var(--secondary);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }
        
        .output-area h3 .icon {
            margin-right: 10px;
        }
        
        .loader {
            display: none;
            text-align: center;
            margin: 30px 0;
        }
        
        .loader-dots {
            display: inline-block;
            position: relative;
            width: 80px;
            height: 80px;
        }
        
        .loader-dots div {
            position: absolute;
            top: 33px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--primary);
            animation-timing-function: cubic-bezier(0, 1, 1, 0);
        }
        
        .loader-dots div:nth-child(1) {
            left: 8px;
            animation: loader-dots1 0.6s infinite;
        }
        
        .loader-dots div:nth-child(2) {
            left: 8px;
            animation: loader-dots2 0.6s infinite;
        }
        
        .loader-dots div:nth-child(3) {
            left: 32px;
            animation: loader-dots2 0.6s infinite;
        }
        
        .loader-dots div:nth-child(4) {
            left: 56px;
            animation: loader-dots3 0.6s infinite;
        }
        
        @keyframes loader-dots1 {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }
        
        @keyframes loader-dots3 {
            0% { transform: scale(1); }
            100% { transform: scale(0); }
        }
        
        @keyframes loader-dots2 {
            0% { transform: translate(0, 0); }
            100% { transform: translate(24px, 0); }
        }
        
        .loader p {
            margin-top: 20px;
            font-size: 1.2rem;
            color: var(--primary);
        }
        
        .error {
            color: var(--error);
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            background-color: rgba(234, 67, 53, 0.1);
            display: none;
            margin: 20px 0;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: #777;
            font-size: 1rem;
            width: 100%;
            max-width: 800px;
            padding: 20px;
            border-top: 2px solid var(--accent);
        }
        
        @media (max-width: 650px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            button {
                padding: 12px 25px;
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Explain Like I'm 5</h1>
            <p class="subtitle">Making complicated things simple for little minds!</p>
            <div class="character">üßíü§ñ</div>
        </header>
        
        <div class="input-area">
            <textarea id="inputText" placeholder="Paste or type something complicated here... (e.g., a paragraph from a Wikipedia article)"></textarea>
        </div>
        
        <div class="button-container">
            <button id="simplifyBtn">
                <span class="icon">‚ú®</span> Make It Simple!
            </button>
        </div>
        
        <div class="loader" id="loader">
            <div class="loader-dots">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
            <p>Thinking like a 5-year-old...</p>
        </div>
        
        <div class="error" id="errorMsg">
            Something went wrong. Please try again.
        </div>
        
        <div class="output-area">
            <h3><span class="icon">üß∏</span> Simple Explanation:</h3>
            <div id="outputText">Your simplified explanation will appear here...</div>
        </div>
    </div>
    
    <footer>
        <p>Powered by Gemini AI ‚Ä¢ Free forever for learning ‚Ä¢ Made with ‚ù§Ô∏è for curious minds</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const inputText = document.getElementById('inputText');
            const simplifyBtn = document.getElementById('simplifyBtn');
            const outputText = document.getElementById('outputText');
            const loader = document.getElementById('loader');
            const errorMsg = document.getElementById('errorMsg');
            
            // Example texts for user to try
            const exampleTexts = [
                "Photosynthesis is the process used by plants, algae and certain bacteria to harness energy from sunlight and turn it into chemical energy.",
                "The Internet is a global system of interconnected computer networks that use the Internet protocol suite to communicate between networks and devices.",
                "A blockchain is a distributed ledger with growing lists of records (blocks) that are securely linked together via cryptographic hashes."
            ];
            
            // Set a random example text
            inputText.value = exampleTexts[Math.floor(Math.random() * exampleTexts.length)];
            
            simplifyBtn.addEventListener('click', async function() {
                const text = inputText.value.trim();
                
                if (!text) {
                    outputText.innerHTML = '<p style="color: var(--error);">Please enter some text to simplify.</p>';
                    return;
                }
                
                // Show loading, hide error and previous output
                loader.style.display = 'block';
                errorMsg.style.display = 'none';
                outputText.innerHTML = '';
                simplifyBtn.disabled = true;
                
                try {
                    // In a real implementation, you would call a Netlify function here
                    // For this demo, we'll simulate the API response with a timeout
                    
                    // Simulate API call delay (2-4 seconds)
                    const delay = Math.floor(Math.random() * 2000) + 2000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                    
                    // In a real implementation, replace this with actual API call
                    // const response = await fetch('/.netlify/functions/simplify', {
                    //     method: 'POST',
                    //     headers: { 'Content-Type': 'application/json' },
                    //     body: JSON.stringify({ text: text })
                    // });
                    // 
                    // if (!response.ok) throw new Error('API error');
                    // const data = await response.json();
                    
                    // For demo purposes, we'll generate a simulated response
                    const simulatedResponse = generateSimulatedResponse(text);
                    
                    // Type out the response for a more engaging experience
                    typeResponse(simulatedResponse);
                } catch (error) {
                    console.error('Error:', error);
                    errorMsg.style.display = 'block';
                    loader.style.display = 'none';
                    simplifyBtn.disabled = false;
                }
            });
            
            // Function to generate a simulated response for demo purposes
            function generateSimulatedResponse(text) {
                // This is a simplified simulation - the real implementation would use the Gemini API
                const responses = [
                    "This is about how plants eat sunlight! Just like you need food to grow, plants use sunlight to make their food. They take in sunlight, air, and water to make energy so they can grow big and strong!",
                    "This is like a super big playground where all computers can talk to each other and share games, pictures, and videos. It's like when you and your friends share toys, but for computers all around the world!",
                    "Imagine you have a special notebook that everyone in your class has a copy of. When you add a new drawing, everyone adds the same drawing to their notebook. This way, no one can change your drawing without everyone knowing!",
                    "This is about how things change and grow over time, just like how you're getting bigger and learning new things every day. It's all about how stuff becomes different as time goes by!",
                    "It's like when you mix different colors of playdough together to make a new color. This is about mixing ideas to make something new and exciting that nobody has seen before!"
                ];
                
                // Pick a response based on text content
                if (text.toLowerCase().includes('photo') || text.toLowerCase().includes('plant')) {
                    return responses[0];
                } else if (text.toLowerCase().includes('internet') || text.toLowerCase().includes('network')) {
                    return responses[1];
                } else if (text.toLowerCase().includes('blockchain') || text.toLowerCase().includes('crypt')) {
                    return responses[2];
                } else if (text.toLowerCase().includes('time') || text.toLowerCase().includes('change')) {
                    return responses[3];
                } else {
                    // Pick a random response for other text
                    const index = Math.floor(Math.random() * responses.length);
                    return responses[index];
                }
            }
            
            // Function to type out response character by character
            function typeResponse(text) {
                let i = 0;
                outputText.innerHTML = '';
                
                const interval = setInterval(function() {
                    if (i < text.length) {
                        outputText.innerHTML += text.charAt(i);
                        i++;
                    } else {
                        clearInterval(interval);
                        loader.style.display = 'none';
                        simplifyBtn.disabled = false;
                    }
                }, 20);
            }
        });
    </script>
</body>
</html>